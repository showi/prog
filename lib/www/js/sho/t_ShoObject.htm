<html>
<head>
<link rel="stylesheet" type="text/css" href="css/ShoWidgetFactory.css"></link>

<!--<script type="text/javascript" src="/lib/php/sho/all.js"></script>-->
<!--<script type="text/javascript" src="/lib/php/sho/t_HtmInclude.php"></script>-->

<script type="text/javascript" src="../tk/prototype.js"></script>
<!--<script type="text/javascript" src="ShoLog.js"></script>-->
<script type="text/javascript" src="ShoGlobal.js"></script>
<script type="text/javascript" src="ShoObject.js"></script>
<script type="text/javascript" src="ShoNode.js"></script>
<script type="text/javascript" src="ShoNodesManager.js"></script>
<script type="text/javascript" src="ShoWidgetTree.js"></script>
<script type="text/javascript" src="ShoWidgetFactory.js"></script>
<script type="text/javascript" src="ShoCreateElement.js"></script>

<script type="text/javascript">

var nodesManager;

function ShoAction_show_popup(domID, src) {
		var popElm = $(domID);
		var srcElm = $(src);
		var srcOffset = srcElm.cumulativeOffset(srcElm); 
		popElm.update(src.innerHTML);
		var dimPop = popElm.getDimensions();
		var dimSrc = srcElm.getDimensions();
		var myDim = new Object();
		myDim.top = srcOffset.top;
		myDim.left = srcOffset.left + dimSrc.width;
		GSHO.log("Dim.");
		popElm.setStyle({
			'top': myDim.top,
			'left': myDim.left,
			'z-index': 1,
		});
		popElm.show();
}
function ShoAction_hide_popup(domID, src) {
		$(domID).hide();
		$(domID).setStyle({
			'z-index': -1,
		});
}
function __init() {
	//console.trace();
	__helper_init();
	GSHO.log('On commence Ã  loguer...');
	var Widgets = new Array();
	var i = 0;
	for(i = 0; i < 0; i++) {
		Widgets[i] = new ShoWidget_Main();
		Widgets[i].get('elm').style.visibility = 'visible';
		Widgets[i].setTitle(".: Main widget " + i + ":.");
		Widgets[i].setContent(
		  "Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet, adipiscing nec," 
		+ "ultricies sed, dolor. Cras elementum ultrices diam. Maecenas ligula massa, varius a, semper congue, euismod non, mi. Proin porttitor," 
		+ "orci nec nonummy molestie, enim est eleifend mi, non fermentum diam nisl sit amet erat. Duis semper. Duis arcu massa, scelerisque vitae," 
		+ "consequat in, pretium a, enim. Pellentesque congue. Ut in risus volutpat libero pharetra tempor. Cras vestibulum bibendum augue." 
		+ "Praesent egestas leo in pede. Praesent blandit odio eu enim. Pellentesque sed dui ut augue blandit sodales."
		);
		Widgets[i].setStatus(Widgets[i].get('elm').id + ' is ready!');
	}
	__callback_queue_event(250);
	nodesManager = new ShoNodesManager;
	
	var elm = undefined;
	elm = gsho_elementCreate('multree', {dom_id: 'peopleByLetter', node_id: 17});
	$('Main').appendChild(elm); 
		
	elm = gsho_elementCreate('tree_node', { dom_id: 'ShoID_TreeMain', node_id: 3});
	$('ShoID_TreeMain').appendChild(elm);	
	elm.sho_elm_get_label().update("Main tree");
	
	elm = gsho_elementCreate('tree_node', { dom_id: 'ShoID_TreeMusic', node_id: 17});
	$('ShoID_TreeMusic').appendChild(elm);	
	elm.sho_elm_get_label().update("Peoples tree");


}
</script>



</head>

<body onload="__init();">
<!--<div id="popup" style="position: absolute;top:0px; left:0px; z-index: 2; visibility: visible; width: 20em;  background-color: black; border-style: solid; color: white"></div>-->
<!--<div><a href="#" onmouseover="ShoAction_show_popup('popup'	, this);" onmouseout="ShoAction_hide_popup('popup');">Popup A</a></div>-->
<!--<div><a href="#" onmouseover="ShoAction_show_popup('popup', this);" onmouseout="ShoAction_hide_popup('popup');">Popup B</a></div>-->
<div id="Main">
<table style="width: 100%; height: 100%;">
<tr>
<td style="vertical-align: top; width: 60%">
<div id="ShoID_TreeMain"></div>
<div id="ShoID_TreeMusic"></div>
</td>
<td colspan=2 style="align: right; vertical-align: top">
<div id="ShoID_LOG"></div>

</td>
</tr>
</table>

</div>
<div id="widgetMain_" class="widgetBaseClass" onmouseup="winStop('%WIDGET_ID%')">
<table border="0" cellpadding="0" cellspacing="0" width="100%" >
	<tbody>
		<tr>
			<td class="widgetCorner_upLeft" onmousedown="winMove('%WIDGET_ID%')"
				style="text-align: right; vertical-align: up; height: 8px; width: 8px;">
			</td>
			<td class="widgetCorner_up" onmousedown="winMove('%WIDGET_ID%')"
				style="text-align: center; vertical-align: up; height: 8px;">
			</td>
			<td class="widgetCorner_upRight" onmousedown="winMove('%WIDGET_ID%')"
				style="text-align: left; vertical-align: up; height: 8px; width: 8px;">
			</td>
		</tr>
		<tr>
			<td class="widgetCorner_middleLeft" onmousedown="winMove('%WIDGET_ID%')"
				style="text-align: right; vertical-align: middle; width: 8px;">
			</td>
			<td style="vertical-align: top;">
			<table width="100%" style="text-align: left;" border="0" cellpadding="0"
				cellspacing="0">
				<tbody>
					<tr>
						<td style="vertical-align: top;">
						<table width="100%" border="0" cellpadding="0" cellspacing="0" height="16" style="border: 1px; border-style:none none dotted none; background-color: black; color: red ">
							<tbody>
								<tr>
									<td height="16" width="16" style="horizontal-align: left"><img src="img/icon16_16.png"></td>
									<td style="width: 100%; align: middle;" onmousedown="winMove('%WIDGET_ID%')"><span id="ShoWidgetTitleID_">widgetName</span></td>
									<td style="align: right">[_][-]<span onclick="winClose('%WIDGET_ID%');">[X]</span></td>
								</tr>
							</tbody>
						</table>
						</td>
					</tr>
					<tr>
						<td style="vertical-align: top; background-color: white;"><div><span id="ShoWidgetContentID_" class="widgetContent">content</span></div></td>
					</tr>
					<tr>
						<td style="vertical-align: top; background-color: black; color: white"><span id="ShoWidgetStatusID_" class="widgetStatusBar">content</span></td>
					</tr>
				</tbody>
			</table>
			</td>
			<td class="widgetCorner_middleRight" onmousedown="winMove('%WIDGET_ID%')"
				style="text-align: left; vertical-align: middle; width: 8px;">
			</td>
		</tr>
		<tr>
			<td class="widgetCorner_downLeft" onmousedown="winMove('%WIDGET_ID%')"
				style="text-align: right; vertical-align: bottom; height: 8px; width: 8px;">
			</td>
			<td class="widgetCorner_down" onmousedown="winMove('%WIDGET_ID%')"
				style="text-align: center; vertical-align: bottom; height: 8px;">
			</td>
			<td class="widgetCorner_downRight" onmousedown="winMove('%WIDGET_ID%')"
				style="text-align: left; vertical-align: top; height: 8px; width: 8px;">
			</td>
		</tr>
	</tbody>
</table>
</div>

</body>
</html>

